---
layout: post
title: '【IT笔试面试题整理】由随机函数rand7构造rand10'
date: 2011-10-9
wordpress_id: 520
categories: [Interview]
tags: []
keywords: ""
description: 
comments: true
---
【试题描述】

已知有个rand7()的函数，返回1到7随机自然数，让利用这个rand7()构造rand10()随机1~10。

【试题分析】

1）要保证rand10()在整数1-10的均匀分布，可以构造一个1-10*n的均匀分布的随机整数区间（n为任何正整数）。假设x是这个1-10*n区间上的一个随机整数，那么x%10+1就是均匀分布在1-10区间上的整数。

2）接下来利用(rand7()-1)*7+rand7()构造出均匀分布在1-49的随机数：

首先rand7()-1得到一个离散整数集合{0，1，2，3，4，5，6}，其中每个整数的出现概率都是1/7。那么(rand7()-1)*7得到一个离散整数集合A={0，7，14，21，28，35，42}，其中每个整数的出现概率也都是1/7。而rand7()得到的集合B={1，2，3，4，5，6，7}中每个整数出现的概率也是1/7。显然集合A和B中任何两个元素组合可以与1-49之间的一个整数一一对应，也就是说1-49之间的任何一个数，可以唯一确定A和B中两个元素的一种组合方式，反过来也成立。由于A和B中元素可以看成是独立事件，根据独立事件的概率公式P(AB)=P(A)P(B)，得到每个组合的概率是1/7*1/7=1/49。因此(rand7()-1)*7+rand7()生成的整数均匀分布在1-49之间，每个数的概率都是1/49。

3）由于出现的每个数的出现都是相对独立的，所以剔除41-49后剩下1-40也应该是均匀分布。

【CodeBy C Language】

``` c
int rand10() {
    int x = 0;
    do {
        x = (rand7()-1)*7+rand7();
    }while(x &gt; 40);
    return x % 10 + 1;
}
```

【参考资料】
<http://topic.csdn.net/u/20110926/11/AD722874-BCE1-4DFE-ADE1-DC4C7C293FF2.html>
<http://blog.csdn.net/ljsspace/article/details/6820753">http://blog.csdn.net/ljsspace/article/details/6820753>
